<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Page</title>
    <link rel="stylesheet" href="../css/filmeSerie.css">
    <link rel="stylesheet" href="../css/Header.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <header>
    <div id="logo-separator">
        <img id="logo" src="../Imagens/image0_large.png" alt="Logo">
    </div>

    <span class="header_icon"><a href="../index.html"><h5>Home</h5></a></span>
    <span class="header_icon"><h5>Movies</h5></span>
    <span class="header_icon"><h5>Series</h5></span>

    <div id="top-corner">

        <form id="search-form" action="../html/pesquisa.html" method="GET">
    
    <input type="text" id="search-input" name="q" placeholder="Search...">
    
    <button type="submit" id="search-btn">
        </button>
</form>

        <div class="profile-container">
            <div class="profile-icon">
                <img src="../Imagens/image 8.png" alt="Profile">
            </div>

            <div class="dropdown-menu">
                <div class="menu-content">
                    <div class="section section-account">
                        <h3>Account</h3>
                        <ul>
                            <li class="active-item"><a href="html/Login.html">Sign in</a></li>
                            <li><a href="#">Sign out</a></li>
                        </ul>
                    </div>
                    <div class="section section-profiles">
                        <h3>PROFILES</h3>
                        <ul>
                            <li>
                                <img src="../imagens/image 8.png" alt="Avatar">
                                <span>Gabriel</span>
                            </li>
                        </ul>
                        <div class="profile-actions">
                            <div id="flex-more">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <span class="header_icon">
        <img src="../Imagens/bell-svgrepo-com 1.png" alt="Notifications">
    </span>
</header>


    <div class="container">
        <div class="left-column">
            <button class="button play-button">Play</button>
            <button class="button download-button">Download</button>

            <div class="action-icons">
                <i class="fa-solid fa-plus"></i>
                <i class="fa-solid fa-thumbs-up"></i>
                <i class="fa-solid fa-thumbs-down"></i>
                <i class="fa-solid fa-share-nodes"></i>
            </div>

            <div class="synopsis">
                <h2>Synopsis</h2>
                <p>
                    A hero driven by belief and hope in the goodness of humanity. In Superman, we follow the superhero's journey as he tries to reconcile his two personas: his extraterrestrial heritage as a Kryptonian and his human life, raised as Clark Kent (David Corenswet) in the city of Smallville, Kansas. Directed by James Gunn, the new film will bring together classic Superman characters, heroes, and villains such as Lex Luthor (Nicholas Hoult), Lois Lane (Rachel Brosnahan), Green Lantern (Nathan Fillion), Hawkgirl (Isabela Merced), among others. Superman's calling will be put to the test through a series of new epic adventures and in the face of a society that sees his values of justice and truth as outdated.
                </p>
            </div>
        </div>

        <div class="right-column">
            <div class="video-player">
                <iframe 
                    width="560" 
                    height="315" 
                    src="https://www.youtube.com/embed/dA6DqKhjCHk?si=OPFRqZkn0ashFl-a" 
                    title="YouTube video player" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>

            <div class="reviews-container">
                <div class="user-reviews">
                    <h3>Reviews</h3>
                    <div class="review-item">
                        <img src="https://imgs.search.brave.com/TCR5sPm_soi9Pc5smSpcXbdI5Mel6KtAWj6FggN_jXc/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pMS5z/bmRjZG4uY29tL2Fy/dHdvcmtzLXh0aWd6/SXpZMkxNSFRPajkt/RUtJMUNnLXQxMDgw/eDEwODAucG5n" alt="Avatar of Tung Tung Negociado">
                        <div class="review-content">
                            <h4>Tung Tung Negociado</h4>
                            <p>Great movie, great actors, an epic soundtrack and humorous moments at the right times. A masterpiece of cinema.</p>
                            <br>
                        </div>
                    </div>
                    <div class="review-item">
                        <img src="https://imgs.search.brave.com/q4EzcDKVPqg5Pv3KAPrYST24o7-J2KWFlCUfx3Coz7w/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93YWxs/cGFwZXJjYXQuY29t/L3cvZnVsbC8wLzkv/Ni8yMDE1Nzk2LTE5/MjB4MjQwNy1pcGhv/bmUtaGQtd2FsdGVy/LXdoaXRlLXdhbGxw/YXBlci1waG90by5q/cGc" alt="Avatar of Ant√≥nio Esterco">
                        <div class="review-content">
                            <h4>Ant√≥nio Esterco</h4>
                            <p>What a trash movie! DC only has trash movies, Marvel is much better!</p>
                             <br>
                        </div>
                    </div>
                    <div class="review-item">
                        <img src="https://imgs.search.brave.com/XTMFpnd7Ct8xcbqWkjXwfRGhdJw8-k775rTDHjCrTSA/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9zdGF0/aWMud2lraWEubm9j/b29raWUubmV0L2pv/Z2FuZG9mb2RkYWNp/cHRicjY5YnVycmlu/aG8vaW1hZ2VzLzYv/NjQvR29yZG8uanBn/L3JldmlzaW9uL2xh/dGVzdC9zY2FsZS10/by13aWR0aC1kb3du/LzI2OD9jYj0yMDI0/MTEwNDE3MTczOSZw/YXRoLXByZWZpeD1w/dC1icg" alt="Avatar of Valter Blanco">
                        <div class="review-content">
                            <h4>O MAGO</h4>
                            <p>Fanboy is one of the worst things in the world... from there you understand the difference of these pathetic beings.</p>
                             <br>
                        </div>
                    </div>
                </div>

                <div class="ratings">
                    <div class="rating-box">
                        <h3>Critic Ratings</h3>
                        <div class="rating-item">
                            <h4>IMDB</h4>
                            <p>8/10</p>
                        </div>
                        <div class="rating-item">
                            <span class="tomato-icon">üçÖ</span>
                            <p>88%</p>
                        </div>
                    </div>
                    <div class="rating-box">
                        <h3>User Ratings</h3>
                        <div class="rating-item">
                            <h4>IMDB</h4>
                            <p>10/10</p>
                        </div>
                        <div class="rating-item">
                            <span class="tomato-icon">üçÖ</span>
                            <p>95%</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/header.js"></script>

    <script src="../js/script.js"></script> <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Pega o par√¢metro 'id' da URL
            const urlParams = new URLSearchParams(window.location.search);
            const imdbId = urlParams.get('id');

            const detailsContainer = document.getElementById('movie-details-container'); // Container principal para os detalhes
            const statusElement = document.getElementById('details-status'); // Elemento para status (ex: <p id="details-status"></p>)

            if (!imdbId) {
                if(detailsContainer) detailsContainer.innerHTML = "<h2>ID do filme/s√©rie n√£o fornecido.</h2>";
                 if(statusElement) statusElement.textContent = "Erro: ID n√£o encontrado na URL.";
                return;
            }

             if(statusElement) statusElement.textContent = "Carregando detalhes...";

            try {
                // Chama o endpoint do backend que busca por ID
                const response = await fetch(`${API_BASE_URL}/api/movies/id/${imdbId}`); // Usa o endpoint correto

                if (!response.ok) {
                    throw new Error(`Falha ao buscar detalhes (Status: ${response.status})`);
                }

                const data = await response.json();

                // Verifica se a API OMDB retornou um erro (via backend)
                if (data && data.response === "False") {
                    throw new Error(data.error || "Filme/S√©rie n√£o encontrado na base de dados externa.");
                }

                if (data) {
                    if(statusElement) statusElement.textContent = ""; // Limpa status
                    populateMovieDetails(data); // Fun√ß√£o para preencher o HTML com os dados
                } else {
                    throw new Error("Dados n√£o recebidos ou inv√°lidos.");
                }

            } catch (error) {
                console.error('Erro ao buscar detalhes:', error);
                 if(detailsContainer) detailsContainer.innerHTML = `<h2>Erro ao carregar detalhes.</h2><p>${error.message}</p>`;
                 if(statusElement) statusElement.textContent = "Erro.";
            }
        });

        // Fun√ß√£o para preencher o HTML com os detalhes recebidos
        function populateMovieDetails(data) {
             // Exemplo: Selecione os elementos HTML pelos IDs e preencha-os
             const titleElement = document.getElementById('movie-title');
             const yearElement = document.getElementById('movie-year');
             const posterElement = document.getElementById('movie-poster');
             const plotElement = document.getElementById('movie-plot');
             const ratingElement = document.getElementById('movie-rating');
             const directorElement = document.getElementById('movie-director');
             // Adicione mais elementos conforme necess√°rio (genre, actors, runtime, etc.)

             if(titleElement) titleElement.textContent = data.title || 'T√≠tulo n√£o dispon√≠vel';
             if(yearElement) yearElement.textContent = data.year || 'N/A';
             if(posterElement && data.poster && data.poster !== 'N/A') {
                 posterElement.src = data.poster;
                 posterElement.alt = data.title;
             } else if (posterElement) {
                 posterElement.src = '../imagens/image_placeholder.png'; // Placeholder
                 posterElement.alt = 'P√¥ster n√£o dispon√≠vel';
             }
             if(plotElement) plotElement.textContent = data.plot || 'Sinopse n√£o dispon√≠vel.';
             if(ratingElement) ratingElement.textContent = `IMDb Rating: ${data.imdbRating || 'N/A'}`;
             if(directorElement) directorElement.textContent = `Diretor: ${data.director || 'N/A'}`;
             // Preencha outros campos...
        }
    </script>
</body>
</html>